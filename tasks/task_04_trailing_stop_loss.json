{
  "task_id": "TASK-04",
  "task_name": "Trailing Stop Loss Implementation",
  "description": "Implement trailing stop loss that activates at ₹5,000 profit and trails every ₹10,000 increment",
  "priority": "High",
  "estimated_hours": 18,
  "dependencies": ["TASK-02", "TASK-03"],
  "sub_tasks": [
    {
      "sub_task_id": "TASK-04-01",
      "sub_task_name": "Profit Calculation for Trailing SL",
      "description": "Calculate total daily profit including protected and current positions",
      "status": "pending",
      "estimated_hours": 4,
      "acceptance_criteria": [
        "Sum protected profit + current positions P&L",
        "Real-time profit tracking",
        "Handle profit-to-loss transitions",
        "Accurate profit calculation for multiple positions"
      ]
    },
    {
      "sub_task_id": "TASK-04-02",
      "sub_task_name": "Trailing SL Activation Logic",
      "description": "Activate trailing SL when profit reaches ₹5,000",
      "status": "pending",
      "estimated_hours": 3,
      "acceptance_criteria": [
        "Check if profit >= ₹5,000",
        "Set initial trailing SL at ₹5,000",
        "Activate trailing SL flag",
        "Send notification on activation"
      ]
    },
    {
      "sub_task_id": "TASK-04-03",
      "sub_task_name": "Trailing SL Increment Logic",
      "description": "Update trailing SL every ₹10,000 profit increment",
      "status": "pending",
      "estimated_hours": 5,
      "acceptance_criteria": [
        "Detect profit increments of ₹10,000",
        "Update trailing SL: ₹5k → ₹10k → ₹20k → ₹30k...",
        "Only move SL up, never down",
        "Handle rapid profit changes correctly"
      ]
    },
    {
      "sub_task_id": "TASK-04-04",
      "sub_task_name": "Trailing SL Trigger & Exit",
      "description": "Exit all positions when profit drops to trailing SL level",
      "status": "pending",
      "estimated_hours": 4,
      "acceptance_criteria": [
        "Monitor profit vs trailing SL continuously",
        "Trigger exit when profit <= trailing SL",
        "Place market orders for all positions",
        "Handle simultaneous exits correctly"
      ]
    },
    {
      "sub_task_id": "TASK-04-05",
      "sub_task_name": "Trailing SL Configuration",
      "description": "Make activation and increment amounts configurable (admin only)",
      "status": "pending",
      "estimated_hours": 2,
      "acceptance_criteria": [
        "Configurable activation threshold (default ₹5,000)",
        "Configurable increment amount (default ₹10,000)",
        "Admin-only access for configuration",
        "Audit log for changes"
      ]
    }
  ]
}

